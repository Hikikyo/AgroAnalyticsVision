<% include layout-top %>
<head>
  <style>
    #map {
      height: 400px;
      width: 100%;
     }
  </style>
</head>

<script>
    var myFunction = function() {

      var e = document.getElementById('app');
      var $scope = angular.element(e).scope();
      $scope.payload = {
        "content": {
          "graph": $scope.graph
        }
      };
      // $scope.$apply();
    };
</script>

<script src="javascripts/app/index/indexModule.js"></script>
<script src="javascripts/app/index/indexController.js"></script>
<script src="javascripts/app/index/datumApiService.js"></script>
<script src="javascripts/app/index/datumApiMockService.js"></script>
<script src="javascripts/app/global/globalVarsService.js"></script>
<script src="javascripts/jquery.min.js"></script>
<script src="javascripts/app/gMapsInitialization.js"></script>>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCILeeAxIRS6Ad2fMfggzJ1vFoDlvyMrms&callback=initMap"></script>
<!-- <script src='//maps.googleapis.com/maps/api/js?sensor=false'></script> -->
<!-- <script src="javascripts/angular-google-maps.js"></script> -->

<!-- page content -->
        <div class="right_col" role="main">
          <div class="">
            <div class="page-title">
              <div class="title_left">
                <div ng-app="indexModule">
                  <div ng-controller="indexController">
                    <div class="dropdown">
                      <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Estados
                      <span class="caret"></span></button>
                      <ul class="dropdown-menu" ng-if="states">
                        <li ng-repeat="state in states">
                          <a ng-click="filterByState(state.id)">
                            {{state.name}}
                          </a>
                        </li>
                      </ul>
                    </div>
                    <div class="dropdown">
                      <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Cidades
                      <span class="caret"></span></button>
                      <ul class="dropdown-menu">
                        <li ng-repeat="city in cities">
                          <a ng-click="getCityAvailableData(city)">
                            {{city.name}}
                          </a>
                        </li>
                      </ul>
                    </div>
            <h3>{{city_name}} <span style="color:{{city_ws_color}}">{{city_ws}}</span></h3>
            <div id="map"></div>
            <script>
              // var street_name = $('[ng-controller="indexController"]').scope().defaultLatitude;
              // console.log(street_name);
              // function initMap() {
              //   var uluru = { lat: 0, lng: 0 };
              //   var map = new google.maps.Map(document.getElementById('map'), {
              //     zoom: 4,
              //     center: uluru
              //   });
              //   var marker = new google.maps.Marker({
              //     position: uluru,
              //     map: map
              //   });
              // }
            </script>
          <div ng-if="loadingWheel" class="lds-css ng-scope">
              <div style="width:100%;height:100%" class="lds-eclipse">
                <div></div>
              </div>
            <style type="text/css">@keyframes lds-eclipse {
              0% {
                -webkit-transform: rotate(0deg);
                transform: rotate(0deg);
              }
              50% {
                -webkit-transform: rotate(180deg);
                transform: rotate(180deg);
              }
              100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
              }
            }
            @-webkit-keyframes lds-eclipse {
              0% {
                -webkit-transform: rotate(0deg);
                transform: rotate(0deg);
              }
              50% {
                -webkit-transform: rotate(180deg);
                transform: rotate(180deg);
              }
              100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
              }
            }
            .lds-eclipse {
              position: relative;
            }
            .lds-eclipse div {
              position: absolute;
              -webkit-animation: lds-eclipse 1s linear infinite;
              animation: lds-eclipse 1s linear infinite;
              width: 160px;
              height: 160px;
              top: 20px;
              left: 20px;
              border-radius: 50%;
              box-shadow: 0 4px 0 0 #8cd0e5;
              -webkit-transform-origin: 80px 82px;
              transform-origin: 80px 82px;
            }
            .lds-eclipse {
              width: 200px !important;
              height: 200px !important;
              -webkit-transform: translate(-100px, -100px) scale(1) translate(100px, 100px);
              transform: translate(-100px, -100px) scale(1) translate(100px, 100px);
            }
              </style>
            </div>
                  </div>
<!--                   <div ng-controller="plotController">
                    <div id="myDiv">Plotly chart will be drawn inside this DIV</div>
                    <p>{{graph}}</p>
                  </div> -->
                </div>
              </div>
            </div>
          </div>
        </div>

<!-- /page content -->

<% include layout-bottom %>

<!-- <script src="javascripts/app/controllers/app.js"></script>
<script src="javascripts/app/controllers/plotController.js"></script> -->
<!-- <script src="javascripts/app/controllers/stateController.js"></script> -->

<script>
    // var trace1 = {
    //   x: [1, 2, 3, 4], 
    //   y: [10, 15, 13, 17], 
    //   type: 'scatter'
    // };
    // var trace2 = {
    //   x: [1, 2, 3, 4], 
    //   y: [16, 5, 11, 9], 
    //   type: 'scatter'
    // };
    // var data = [trace1, trace2];
    // Plotly.newPlot('myDiv', data);
</script>