<% include layout-top %>

<script>
    var myFunction = function() {

      var e = document.getElementById('app');     
      var $scope = angular.element(e).scope();
      $scope.payload = {
        "content": {
          "graph": $scope.graph
        }
      };
      $scope.$apply();
    };
</script>

<!-- page content -->
        <div class="right_col" role="main">
          <div class="">
            <div class="page-title">
              <div class="title_left">
              
                <div ng-app="App">               
                  <div ng-controller="stateController">
                    <div class="dropdown">
                      <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Estados
                      <span class="caret"></span></button>
                      <ul class="dropdown-menu">
                        <li><a ng-repeat="state in states" href="{{state.id}}">{{state.name}}</a></li>
                      </ul>
                    </div>
                  </div>

                  <div ng-controller="plotController">
                    <div id="myDiv"><!-- Plotly chart will be drawn inside this DIV --></div>
                    <p>{{graph}}</p>                 
                  </div>
                </div>


              </div>
            </div>
          </div>
        </div>

<!-- /page content -->

<% include layout-bottom %>

<script src="javascripts/app/controllers/app.js"></script>
<script src="javascripts/app/controllers/plotController.js"></script>
<script src="javascripts/app/controllers/stateController.js"></script>

<script>
    var trace1 = {
      x: [1, 2, 3, 4], 
      y: [10, 15, 13, 17], 
      type: 'scatter'
    };
    var trace2 = {
      x: [1, 2, 3, 4], 
      y: [16, 5, 11, 9], 
      type: 'scatter'
    };
    var data = [trace1, trace2];
    Plotly.newPlot('myDiv', data);
</script>